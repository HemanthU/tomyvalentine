<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>For Moni ‚ù§Ô∏è</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif;}
body{overflow:hidden;color:white;text-align:center;background:black;}

section{height:100vh;display:flex;justify-content:center;align-items:center;flex-direction:column;padding:25px;}

.gradient1{ background:linear-gradient(135deg,#ff758c,#ff7eb3); }
.gradient2{ background:linear-gradient(135deg,#ff9a9e,#fecfef); }

.name{font-size:2.6rem;font-weight:700;margin-bottom:15px;}
.letter{font-size:1.1rem;line-height:1.7;max-width:420px;}
.proposal{margin-top:30px;font-size:1.9rem;font-weight:600;}

.buttons{margin-top:30px;display:flex;gap:18px;}
button{padding:12px 24px;border:none;border-radius:30px;font-size:1rem;cursor:pointer;}
.yes{background:#ff4b6e;color:white;}
.no{background:white;color:#ff4b6e;}

.proposal-letter{max-width:460px;font-size:1.15rem;line-height:1.8;text-align:left;}

.hint{
position:absolute;
bottom:25px;
font-size:0.9rem;
opacity:0;
transition:opacity 1s;
}
.show{opacity:1;}
</style>
</head>

<body>

<audio id="revealMusic" src="final.mp3"></audio>
<audio id="proposalMusic" src="proposal.mp3"></audio>

<section class="gradient1" id="first">
  <div class="name">Moni ‚ù§Ô∏è</div>

  <div class="letter">
    From the smallest moments to the biggest smiles‚Ä¶ you became my favorite part of every day.
    <br><br>‚Äî Hemu
  </div>

  <div class="proposal">Will you be mine forever?</div>

  <div class="buttons">
    <button class="yes" onclick="startProposal()">Yes üíñ</button>
    <button class="no">No üò¢</button>
  </div>
</section>

<section class="gradient2" id="letter" style="display:none;">
  <div class="proposal-letter">
    Moni‚Ä¶ this letter is about you ‚Äî the way you smile, the way you care, and the way you unknowingly became the most important part of my life. You are not just someone I love, you are the calm I search for, the happiness I return to, and the reason my heart feels full even on ordinary days...
    <br><br>‚Äî Hemu ‚ù§Ô∏è
  </div>

  <div class="hint" id="hint">swipe right for memories ‚Üí</div>
</section>

<script>

const revealMusic = document.getElementById('revealMusic');
const proposalMusic = document.getElementById('proposalMusic');

revealMusic.loop = true;
proposalMusic.loop = true;

/* üîì HARD MOBILE AUDIO UNLOCK */
document.body.addEventListener('touchstart', () => {
  revealMusic.play().then(()=>{ revealMusic.pause(); revealMusic.currentTime=0; });
  proposalMusic.play().then(()=>{ proposalMusic.pause(); proposalMusic.currentTime=0; });
},{ once:true });

/* üéµ KEEP FINAL MUSIC ALIVE */
function keepFinalAlive(){
  if(revealMusic.paused){
    revealMusic.play().catch(()=>{});
  }
}
setInterval(keepFinalAlive, 800);

/* ‚ñ∂Ô∏è START FINAL MUSIC */
revealMusic.play().catch(()=>{});

/* YES FLOW */
function startProposal(){

  revealMusic.pause();
  revealMusic.currentTime = 0;

  proposalMusic.currentTime = 0;
  proposalMusic.play().catch(()=>{});

  document.getElementById('first').style.display="none";
  document.getElementById('letter').style.display="flex";

  setTimeout(()=>{
    document.getElementById('hint').classList.add('show');
  },60000);
}

/* NO BUTTON CAN'T STOP MUSIC */
const noBtn = document.querySelector('.no');

noBtn.addEventListener('touchstart', (e)=>{
  e.preventDefault();
  e.stopPropagation();
  moveNo();
});

noBtn.addEventListener('mouseover', moveNo);

function moveNo(){
  const x = Math.random()*200 - 100;
  const y = Math.random()*200 - 100;
  noBtn.style.transform = `translate(${x}px,${y}px)`;
}

/* üì≤ SWIPE RIGHT DETECTION */
let startX = 0;
let endX = 0;

document.addEventListener('touchstart', (e)=>{
  startX = e.touches[0].clientX;
});

document.addEventListener('touchmove', (e)=>{
  endX = e.touches[0].clientX;
});

document.addEventListener('touchend', ()=>{

  if(endX - startX > 100){

    proposalMusic.pause();
    proposalMusic.currentTime = 0;

    window.location.href = "memories.html";
  }

  startX = 0;
  endX = 0;
});
</script>

</body>
</html>
