<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Our Memories ❤️</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&family=Patrick+Hand&display=swap" rel="stylesheet">

<style>

*{margin:0;padding:0;box-sizing:border-box;}

html{
height:100%;
overflow:hidden;
}

body{
height:100vh;
overflow:hidden;
background:linear-gradient(135deg,#ffc3a0,#ffafbd);
display:flex;
flex-direction:column;
justify-content:center;
align-items:center;
text-align:center;
color:white;
font-family:'Poppins',sans-serif;
}
  /* animation stage */
  #stage{
display:flex;
flex-direction:column;
justify-content:flex-start;
align-items:center;
height:75vh;
overflow-y:auto;
padding-bottom:20px;
  }
#stage::-webkit-scrollbar{
display:none;
}
/* CLASSIC POLAROID */
.polaroid{
width:230px;
background:white;
padding:12px 12px 40px 12px;
border-radius:6px;
box-shadow:0 20px 45px rgba(0,0,0,0.4);
display:flex;
flex-direction:column;
align-items:center;
opacity:0;
transform:translateX(100px) rotate(0deg);
transition:all 0.8s ease;
}

.polaroid img{
width:100%;
height:180px;
object-fit:cover;
border-radius:4px;
opacity:0;
transition:opacity 0.6s;
}

/* typed caption */
.caption{
margin-top:10px;
font-family:'Patrick Hand',cursive;
font-size:1.2rem;
color:#222;
min-height:28px;
}

/* animation states */
.show{opacity:1;transform:translateX(0);}
.showimg img{opacity:1;}
.hide{opacity:0;transform:translateX(-100px);}

/* FINAL MESSAGE */
.final{
margin-top:35px;
font-size:1.8rem;
font-weight:600;
max-width:350px;
line-height:1.5;
opacity:0;
transition:opacity 1.5s;
}
</style>
</head>

<body>

<audio id="memoryMusic" src="memory.mp3" loop></audio>
<audio id="heartbeat" src="heartbeat.mp3"></audio>

<div id="stage"></div>

<div class="final" id="finalText">
Will you be here next year… and every year after? ❤️
</div>

<script>
const music=document.getElementById('memoryMusic');
const beat=document.getElementById('heartbeat');

music.play().catch(()=>{});

/* TYPE EFFECT */
function typeCaption(el,text){
  let i=0;
  el.innerHTML="";
  let typing=setInterval(()=>{
    el.innerHTML+=text.charAt(i);
    i++;
    if(i>=text.length) clearInterval(typing);
  },40);
}

/* create polaroid */
function createPolaroid(src,text,angle){
  let p=document.createElement('div');
  p.className='polaroid';
  p.style.transform=`translateX(100px) rotate(${angle}deg)`;
  p.innerHTML=`<img src="${src}"><div class="caption"></div>`;
  p.dataset.caption=text;
  return p;
}

const memories=[
["photo1.jpg","The first smile I fell for",-3],
["photo2.jpg","Moments that felt like home",2],
["photo3.jpg","Us, just being us",-2],
["photo4.jpg","My favorite memory",3]
];

const stage=document.getElementById('stage');

/* cinematic sequence */
function playSequence(i){

  if(i>=memories.length){
    showFinalGrid();
    return;
  }

  let pol=createPolaroid(memories[i][0],memories[i][1],memories[i][2]);
  stage.innerHTML="";
  stage.appendChild(pol);

  setTimeout(()=>pol.classList.add('show'),200);

  setTimeout(()=>{
    pol.classList.add('showimg');
    typeCaption(pol.querySelector('.caption'),pol.dataset.caption);
  },900);

  setTimeout(()=>pol.classList.add('hide'),4200);

  setTimeout(()=>playSequence(i+1),4800);
}

playSequence(0);

/* FINAL GRID + MESSAGE + HEARTBEAT + FADE */
function showFinalGrid(){

  stage.innerHTML="";

  /* FORCE GRID LAYOUT */
  stage.style.display="grid";
  stage.style.gridTemplateColumns="repeat(2,1fr)";
  stage.style.gap="20px";
  stage.style.justifyItems="center";
  stage.style.alignItems="center";
  stage.style.width="100%";
  stage.style.maxWidth="420px";
  stage.style.marginTop="20px";

  memories.forEach(m=>{
    let pol=createPolaroid(m[0],m[1],m[2]);
    pol.classList.add('show');
    pol.querySelector("img").style.opacity=1;
    pol.querySelector(".caption").innerHTML=m[1];
    stage.appendChild(pol);
  });

  /* show message */
  document.getElementById('finalText').style.opacity=1;

  /* heartbeat */
  beat.play().catch(()=>{});

  /* fade music */
  let vol=1;
  let fade=setInterval(()=>{
    vol-=0.05;
    music.volume=vol;
    if(vol<=0){
      clearInterval(fade);
      music.pause();
    }
  },200);
}
</script>

</body>
</html>
